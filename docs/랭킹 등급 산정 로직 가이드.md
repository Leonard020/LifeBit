# LifeBit ë­í‚¹ ë“±ê¸‰ ì‚°ì • ë¡œì§ ê°€ì´ë“œ

## ğŸ“‹ ëª©ì°¨
1. [ê°œìš”](#ê°œìš”)
2. [ë­í‚¹ ì‹œìŠ¤í…œ êµ¬ì„±](#ë­í‚¹-ì‹œìŠ¤í…œ-êµ¬ì„±)
3. [ì ìˆ˜ ì¸¡ì • ë°©ì‹](#ì ìˆ˜-ì¸¡ì •-ë°©ì‹)
4. [ë“±ê¸‰ ì‚°ì • ê¸°ì¤€](#ë“±ê¸‰-ì‚°ì •-ê¸°ì¤€)
5. [ë°ì´í„° íë¦„ë„](#ë°ì´í„°-íë¦„ë„)
6. [ì‹¤ì œ êµ¬í˜„ ì½”ë“œ](#ì‹¤ì œ-êµ¬í˜„-ì½”ë“œ)
7. [ì—…ì  ì‹œìŠ¤í…œ](#ì—…ì -ì‹œìŠ¤í…œ)
8. [ë³´ìƒ ì‹œìŠ¤í…œ](#ë³´ìƒ-ì‹œìŠ¤í…œ)

---

## ğŸ¯ ê°œìš”

LifeBitì˜ ë­í‚¹ ì‹œìŠ¤í…œì€ ì‚¬ìš©ìì˜ ê±´ê°• ê´€ë¦¬ í™œë™ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€í•˜ì—¬ ì ìˆ˜ë¥¼ ì‚°ì •í•˜ê³ , ì´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ë“±ê¸‰ì„ ë¶€ì—¬í•˜ëŠ” ì‹œìŠ¤í…œì…ë‹ˆë‹¤. ìš´ë™, ì‹ë‹¨, ì¶œì„, ì—…ì  ë“± ë‹¤ì–‘í•œ í™œë™ì´ ì ìˆ˜ì— ë°˜ì˜ë©ë‹ˆë‹¤.

### í•µì‹¬ íŠ¹ì§•
- **ì‹¤ì‹œê°„ ì ìˆ˜ ê³„ì‚°**: ì‚¬ìš©ìì˜ í™œë™ì´ ì¦‰ì‹œ ë°˜ì˜
- **ë‹¤ì°¨ì› í‰ê°€**: ìš´ë™, ì‹ë‹¨, ì¶œì„, ì—…ì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€
- **ë“±ê¸‰ ì‹œìŠ¤í…œ**: 9ë‹¨ê³„ ë“±ê¸‰ìœ¼ë¡œ ì‚¬ìš©ì ë™ê¸°ë¶€ì—¬
- **ìë™ ê°±ì‹ **: ë§¤ì¼ ìƒˆë²½ 3ì‹œì— ì „ì²´ ë­í‚¹ ìë™ ê°±ì‹ 

---

## ğŸ—ï¸ ë­í‚¹ ì‹œìŠ¤í…œ êµ¬ì„±

### ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°
```
user_ranking (ì‚¬ìš©ì ë­í‚¹ í…Œì´ë¸”)
â”œâ”€â”€ user_id: ì‚¬ìš©ì ID
â”œâ”€â”€ total_score: ì´ ì ìˆ˜
â”œâ”€â”€ rank_position: í˜„ì¬ ìˆœìœ„
â”œâ”€â”€ streak_days: ì—°ì† ê¸°ë¡ ì¼ìˆ˜
â”œâ”€â”€ tier: ë“±ê¸‰ (UNRANK, BRONZE, SILVER, GOLD, PLATINUM, DIAMOND, MASTER, GRANDMASTER, CHALLENGER)
â”œâ”€â”€ season: ì‹œì¦Œ ë²ˆí˜¸
â””â”€â”€ last_updated_at: ë§ˆì§€ë§‰ ê°±ì‹  ì‹œê°„

ranking_history (ë­í‚¹ íˆìŠ¤í† ë¦¬ í…Œì´ë¸”)
â”œâ”€â”€ user_ranking_id: ë­í‚¹ ì°¸ì¡°
â”œâ”€â”€ total_score: ê¸°ë¡ ë‹¹ì‹œ ì ìˆ˜
â”œâ”€â”€ rank_position: ê¸°ë¡ ë‹¹ì‹œ ìˆœìœ„
â”œâ”€â”€ season: ì‹œì¦Œ ë²ˆí˜¸
â””â”€â”€ recorded_at: ê¸°ë¡ ì‹œê°„
```

### ë“±ê¸‰ë³„ ìƒ‰ìƒ ë° ì„¤ëª…
| ë“±ê¸‰ | ìƒ‰ìƒ ì½”ë“œ | í•œê¸€ëª… | ì„¤ëª… | ì ìˆ˜ ê¸°ì¤€ |
|------|-----------|--------|------|-----------|
| UNRANK | #bdbdbd | ì–¸ë­í¬ | ì•„ì§ ë­í‚¹ ê¸°ë¡ì´ ì—†ìŒ | 0ì  |
| BRONZE | #cd7f32 | ë¸Œë¡ ì¦ˆ | ê¸°ë³¸ í™œë™ ë“±ê¸‰ | 100-999ì  |
| SILVER | #c0c0c0 | ì‹¤ë²„ | ê¾¸ì¤€í•œ í™œë™ ë“±ê¸‰ | 1,000-1,999ì  |
| GOLD | #ffd700 | ê³¨ë“œ | ìƒìœ„ 30% ë“±ê¸‰ | 2,000-2,999ì  |
| PLATINUM | #e5e4e2 | í”Œë˜í‹°ë„˜ | ìƒìœ„ 15% ë“±ê¸‰ | 3,000-3,999ì  |
| DIAMOND | #00bfff | ë‹¤ì´ì•„ | ìƒìœ„ 7% ë“±ê¸‰ | 4,000-4,999ì  |
| MASTER | #a020f0 | ë§ˆìŠ¤í„° | ìƒìœ„ 3% ë“±ê¸‰ | 5,000-5,999ì  |
| GRANDMASTER | #ff4500 | ê·¸ëœë“œë§ˆìŠ¤í„° | ìƒìœ„ 1% ë“±ê¸‰ | 6,000-6,999ì  |
| CHALLENGER | #ff1493 | ì±Œë¦°ì € | ìµœìƒìœ„ 0.1% ë“±ê¸‰ | 7,000ì  ì´ìƒ |

---

## ğŸ“Š ì ìˆ˜ ì¸¡ì • ë°©ì‹

### ì´ì  ê³„ì‚° ê³µì‹
```
ì´ì  = ìš´ë™ì ìˆ˜ + ì‹ë‹¨ì ìˆ˜ + ì¶œì„ì ìˆ˜ + ì—…ì ì ìˆ˜
```

### 1. ìš´ë™ ì ìˆ˜ (ìµœê·¼ 7ì¼ ê¸°ì¤€)
```
ìš´ë™ì ìˆ˜ = (ì´ ìš´ë™ ì‹œê°„(ë¶„) Ã— 2) + (ì´ ì¹¼ë¡œë¦¬ ì†Œëª¨ Ã— 0.5)
```

**ì¸¡ì • í•­ëª©:**
- **ìš´ë™ ì‹œê°„**: `exercise_sessions` í…Œì´ë¸”ì˜ `duration_minutes` í•©ê³„
- **ì¹¼ë¡œë¦¬ ì†Œëª¨**: `exercise_sessions` í…Œì´ë¸”ì˜ `calories_burned` í•©ê³„
- **ê¸°ê°„**: ìµœê·¼ 7ì¼ê°„ì˜ ê¸°ë¡

**ì˜ˆì‹œ:**
- 7ì¼ê°„ ì´ 300ë¶„ ìš´ë™ + 1,500ì¹¼ë¡œë¦¬ ì†Œëª¨
- ì ìˆ˜: (300 Ã— 2) + (1,500 Ã— 0.5) = 600 + 750 = 1,350ì 

### 2. ì‹ë‹¨ ì ìˆ˜ (ìµœê·¼ 7ì¼ ê¸°ì¤€)
```
ì‹ë‹¨ì ìˆ˜ = ëª©í‘œ ì˜ì–‘ì†Œ ë‹¬ì„±ë¥ (%)
```

**ì¸¡ì • í•­ëª©:**
- **íƒ„ìˆ˜í™”ë¬¼**: ëª©í‘œ 200g/ì¼ ëŒ€ë¹„ ë‹¬ì„±ë¥ 
- **ë‹¨ë°±ì§ˆ**: ëª©í‘œ 120g/ì¼ ëŒ€ë¹„ ë‹¬ì„±ë¥   
- **ì§€ë°©**: ëª©í‘œ 60g/ì¼ ëŒ€ë¹„ ë‹¬ì„±ë¥ 
- **ì¹¼ë¡œë¦¬**: ëª©í‘œ 1,500kcal/ì¼ ëŒ€ë¹„ ë‹¬ì„±ë¥ 

**ê³„ì‚° ë°©ì‹:**
```java
// 4ê°œ í•­ëª©ì˜ í‰ê·  ë‹¬ì„±ë¥  ê³„ì‚°
double carbsRate = Math.min(100, totalCarbs / targetCarbs * 100);
double proteinRate = Math.min(100, totalProtein / targetProtein * 100);
double fatRate = Math.min(100, totalFat / targetFat * 100);
double caloriesRate = Math.min(100, totalCalories / targetCalories * 100);

int avgRate = (int) Math.round((carbsRate + proteinRate + fatRate + caloriesRate) / 4.0);
```

**ì˜ˆì‹œ:**
- íƒ„ìˆ˜í™”ë¬¼ 80%, ë‹¨ë°±ì§ˆ 90%, ì§€ë°© 70%, ì¹¼ë¡œë¦¬ 85% ë‹¬ì„±
- ì ìˆ˜: (80 + 90 + 70 + 85) Ã· 4 = 81ì 

### 3. ì¶œì„ ì ìˆ˜
```
ì¶œì„ì ìˆ˜ = ì—°ì† ê¸°ë¡ ì¼ìˆ˜ Ã— 10
```

**ì¸¡ì • í•­ëª©:**
- **ì—°ì† ê¸°ë¡**: `user_ranking` í…Œì´ë¸”ì˜ `streak_days` ê°’
- **ê¸°ì¤€**: ìš´ë™ ë˜ëŠ” ì‹ë‹¨ ê¸°ë¡ ì¤‘ í•˜ë‚˜ë¼ë„ ìˆìœ¼ë©´ í•´ë‹¹ ì¼ì€ ì¶œì„ìœ¼ë¡œ ì¸ì •

**ì˜ˆì‹œ:**
- 15ì¼ ì—°ì† ê¸°ë¡
- ì ìˆ˜: 15 Ã— 10 = 150ì 

### 4. ì—…ì  ì ìˆ˜
```
ì—…ì ì ìˆ˜ = ë‹¬ì„±í•œ ì—…ì  ê°œìˆ˜ Ã— 50
```

**ì¸¡ì • í•­ëª©:**
- **ë‹¬ì„± ì—…ì **: `user_achievements` í…Œì´ë¸”ì—ì„œ `is_achieved = true`ì¸ ê°œìˆ˜
- **ì—…ì  ì¢…ë¥˜**: ì—°ì† ìš´ë™, ì´ ìš´ë™ ì¼ìˆ˜, ì²« ìš´ë™ ë“±

**ì˜ˆì‹œ:**
- 3ê°œ ì—…ì  ë‹¬ì„±
- ì ìˆ˜: 3 Ã— 50 = 150ì 

---

## ğŸ† ë“±ê¸‰ ì‚°ì • ê¸°ì¤€

### ë“±ê¸‰ë³„ ì ìˆ˜ êµ¬ê°„
```java
public RankingTier calculateTier(int totalScore) {
    if (totalScore == 0) return RankingTier.UNRANK;
    if (totalScore < 1000) return RankingTier.BRONZE;
    if (totalScore < 2000) return RankingTier.SILVER;
    if (totalScore < 3000) return RankingTier.GOLD;
    if (totalScore < 4000) return RankingTier.PLATINUM;
    if (totalScore < 5000) return RankingTier.DIAMOND;
    if (totalScore < 6000) return RankingTier.MASTER;
    if (totalScore < 7000) return RankingTier.GRANDMASTER;
    return RankingTier.CHALLENGER;
}
```

### ë“±ê¸‰ ë³€í™” ì•Œë¦¼
- ë“±ê¸‰ì´ ìƒìŠ¹/í•˜ë½í•  ë•Œ ìë™ìœ¼ë¡œ ì•Œë¦¼ ë°œì†¡
- ì•Œë¦¼ íƒ€ì…: `TIER_CHANGE`
- ë©”ì‹œì§€: "ë“±ê¸‰ì´ [ì´ì „ë“±ê¸‰]ì—ì„œ [ìƒˆë“±ê¸‰]ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤."

---

## ğŸ”„ ë°ì´í„° íë¦„ë„

```mermaid
graph TD
    A[ì‚¬ìš©ì í™œë™] --> B[ë°ì´í„° ì €ì¥]
    B --> C[ìš´ë™ ê¸°ë¡]
    B --> D[ì‹ë‹¨ ê¸°ë¡]
    B --> E[ì—…ì  ì—…ë°ì´íŠ¸]
    
    C --> F[ìš´ë™ ì ìˆ˜ ê³„ì‚°]
    D --> G[ì‹ë‹¨ ì ìˆ˜ ê³„ì‚°]
    E --> H[ì—…ì  ì ìˆ˜ ê³„ì‚°]
    
    F --> I[ì´ì  ê³„ì‚°]
    G --> I
    H --> I
    
    I --> J[ë“±ê¸‰ ì‚°ì •]
    J --> K[ë­í‚¹ ì—…ë°ì´íŠ¸]
    K --> L[ìˆœìœ„ ì¬ê³„ì‚°]
    
    L --> M[ë“±ê¸‰ ë³€í™” ê°ì§€]
    M --> N{ë“±ê¸‰ ë³€í™”?}
    N -->|Yes| O[ì•Œë¦¼ ë°œì†¡]
    N -->|No| P[ì™„ë£Œ]
    O --> P
    
    Q[ìŠ¤ì¼€ì¤„ëŸ¬] --> R[ë§¤ì¼ ìƒˆë²½ 3ì‹œ]
    R --> I
```

### ì‹¤ì‹œê°„ ì ìˆ˜ ê³„ì‚° íë¦„
1. **ì‚¬ìš©ì í™œë™ ê¸°ë¡**
   - ìš´ë™ ì„¸ì…˜ ë“±ë¡
   - ì‹ë‹¨ ê¸°ë¡ ë“±ë¡
   - ì—…ì  ë‹¬ì„±

2. **ì ìˆ˜ ê³„ì‚° íŠ¸ë¦¬ê±°**
   - í™œë™ ê¸°ë¡ ì‹œ ì¦‰ì‹œ ì ìˆ˜ ì¬ê³„ì‚°
   - ìŠ¤ì¼€ì¤„ëŸ¬ë¥¼ í†µí•œ ì •ê¸° ê°±ì‹ 

3. **ë­í‚¹ ì—…ë°ì´íŠ¸**
   - ì´ì  ê³„ì‚°
   - ë“±ê¸‰ ì‚°ì •
   - ìˆœìœ„ ì¬ê³„ì‚°

4. **ì•Œë¦¼ ë°œì†¡**
   - ë“±ê¸‰ ë³€í™” ì‹œ ì•Œë¦¼
   - ì—…ì  ë‹¬ì„± ì‹œ ì•Œë¦¼

---

## ğŸ’» ì‹¤ì œ êµ¬í˜„ ì½”ë“œ

### ì´ì  ê³„ì‚° ë©”ì„œë“œ
```java
public int calculateTotalScore(Long userId) {
    // 1. ìš´ë™ ì ìˆ˜: ìµœê·¼ 7ì¼ê°„ ì´ ìš´ë™ ì‹œê°„(ë¶„) Ã—2 + ì¹¼ë¡œë¦¬ ì†Œëª¨(0.5)
    int exerciseMinutes = exerciseService.getExerciseMinutesByPeriod(userId, 7);
    int caloriesBurned = exerciseService.getCaloriesBurnedByPeriod(userId, 7);
    int exerciseScore = exerciseMinutes * 2 + (int)(caloriesBurned * 0.5);

    // 2. ì‹ë‹¨ ì ìˆ˜: ìµœê·¼ 7ì¼ê°„ ëª©í‘œ ì˜ì–‘ì†Œ ë‹¬ì„±ë¥ (%) Ã—1
    int mealAchievementRate = mealService.getWeeklyNutritionAchievementRate(userId);
    int mealScore = mealAchievementRate;

    // 3. ì¶œì„ ì ìˆ˜: streakDays Ã—10
    int streakDays = userRankingRepository.findByUserId(userId)
        .map(UserRanking::getStreakDays).orElse(0);
    int streakScore = streakDays * 10;

    // 4. ì—…ì  ì ìˆ˜: ë‹¬ì„± ì—…ì  ê°œìˆ˜ Ã—50
    int achievementCount = achievementService.getUserAchievementCount(userId);
    int achievementScore = achievementCount * 50;

    return exerciseScore + mealScore + streakScore + achievementScore;
}
```

### ì‹ë‹¨ ì ìˆ˜ ê³„ì‚° ë©”ì„œë“œ
```java
public int getWeeklyNutritionAchievementRate(Long userId) {
    LocalDate endDate = LocalDate.now();
    LocalDate startDate = endDate.minusDays(6);
    
    List<MealLog> mealLogs = mealLogRepository
        .findByUserAndLogDateBetweenOrderByLogDateDesc(user, startDate, endDate);
    
    if (mealLogs.isEmpty()) return 0;

    // ëª©í‘œê°’ ì„¤ì •
    double targetCarbs = 200 * 7;    // 7ì¼ê°„ ëª©í‘œ
    double targetProtein = 120 * 7;
    double targetFat = 60 * 7;
    double targetCalories = 1500 * 7;

    // ì‹¤ì œ ì„­ì·¨ëŸ‰ ê³„ì‚°
    double totalCarbs = 0, totalProtein = 0, totalFat = 0, totalCalories = 0;
    for (MealLog log : mealLogs) {
        FoodItem food = log.getFoodItem();
        double qty = log.getQuantity() != null ? log.getQuantity().doubleValue() : 1.0;
        
        totalCarbs += food.getCarbs() != null ? food.getCarbs().doubleValue() * qty / 100.0 : 0;
        totalProtein += food.getProtein() != null ? food.getProtein().doubleValue() * qty / 100.0 : 0;
        totalFat += food.getFat() != null ? food.getFat().doubleValue() * qty / 100.0 : 0;
        totalCalories += food.getCalories() != null ? food.getCalories().doubleValue() * qty / 100.0 : 0;
    }
    
    // ë‹¬ì„±ë¥  ê³„ì‚° (ìµœëŒ€ 100% ì œí•œ)
    double carbsRate = Math.min(100, totalCarbs / targetCarbs * 100);
    double proteinRate = Math.min(100, totalProtein / targetProtein * 100);
    double fatRate = Math.min(100, totalFat / targetFat * 100);
    double caloriesRate = Math.min(100, totalCalories / targetCalories * 100);
    
    // 4ê°œ í•­ëª© í‰ê· 
    return (int) Math.round((carbsRate + proteinRate + fatRate + caloriesRate) / 4.0);
}
```

### ìŠ¤ì¼€ì¤„ëŸ¬ë¥¼ í†µí•œ ìë™ ê°±ì‹ 
```java
@Scheduled(cron = "0 0 3 * * *")  // ë§¤ì¼ ìƒˆë²½ 3ì‹œ
@Transactional
public void scheduledRankingUpdate() {
    log.info("[ìŠ¤ì¼€ì¤„ëŸ¬] ì „ì²´ ì‚¬ìš©ì ë­í‚¹ ìë™ ê°±ì‹  ì‹œì‘");
    
    List<UserRanking> allRankings = userRankingRepository.findAll();
    int rank = 1;
    
    for (UserRanking ranking : allRankings) {
        int prevScore = ranking.getTotalScore();
        RankingTier prevTier = ranking.getTier();

        // 1. ì ìˆ˜/ë“±ê¸‰ ì¬ê³„ì‚°
        int newScore = calculateTotalScore(ranking.getUserId());
        RankingTier newTier = calculateTier(newScore);
        
        ranking.setPreviousRank(ranking.getRankPosition());
        ranking.setRankPosition(rank++);
        ranking.setTotalScore(newScore);
        ranking.setTier(newTier);
        ranking.setLastUpdatedAt(LocalDateTime.now());

        // 2. ë“±ê¸‰ ë³€í™” ê°ì§€ ì‹œ ì•Œë¦¼ ì „ì†¡
        if (prevTier != newTier) {
            notificationService.saveNotification(
                ranking.getUserId(), 
                "TIER_CHANGE", 
                "ë“±ê¸‰ ë³€í™” ì•Œë¦¼", 
                String.format("ë“±ê¸‰ì´ %sì—ì„œ %së¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.", prevTier.name(), newTier.name())
            );
        }
    }
    
    userRankingRepository.saveAll(allRankings);
    log.info("[ìŠ¤ì¼€ì¤„ëŸ¬] ì „ì²´ ì‚¬ìš©ì ë­í‚¹ ìë™ ê°±ì‹  ì™„ë£Œ: {}ëª…", allRankings.size());
}
```

---

## ğŸ… ì—…ì  ì‹œìŠ¤í…œ

### ì—…ì  ì¢…ë¥˜
| ì—…ì  íƒ€ì… | ì œëª© | ëª©í‘œê°’ | ì„¤ëª… |
|-----------|------|--------|------|
| STREAK_7 | ì£¼ê°„ ì „ì‚¬ | 7ì¼ | 7ì¼ ì—°ì† ìš´ë™ |
| STREAK_30 | ì›”ê°„ ë§ˆìŠ¤í„° | 30ì¼ | 30ì¼ ì—°ì† ìš´ë™ |
| STREAK_90 | 3ê°œì›” ì±Œë¦°ì§€ | 90ì¼ | 90ì¼ ì—°ì† ìš´ë™ |
| STREAK_180 | 6ê°œì›” ë ˆì „ë“œ | 180ì¼ | 180ì¼ ì—°ì† ìš´ë™ |
| TOTAL_WORKOUT_DAYS | ìš´ë™ ì• í˜¸ê°€ | 50ì¼ | ì´ 50ì¼ ìš´ë™ |
| WEEKLY_EXERCISE | ì£¼ê°„ ì „ì‚¬ | 7íšŒ | ì£¼ê°„ 7íšŒ ìš´ë™ |
| MONTHLY_EXERCISE | ì›”ê°„ ë§ˆìŠ¤í„° | 30íšŒ | ì›”ê°„ 30íšŒ ìš´ë™ |
| FIRST_EXERCISE | ì²« ê±¸ìŒ | 1íšŒ | ì²« ìš´ë™ ê¸°ë¡ |
| FIRST_MEAL | ì‹ë‹¨ ì‹œì‘ | 1íšŒ | ì²« ì‹ë‹¨ ê¸°ë¡ |

### ì—…ì  ì ìˆ˜ ê³„ì‚°
```java
@Transactional(readOnly = true)
public int getUserAchievementCount(Long userId) {
    return (int) userAchievementRepository.findByUserIdWithAchievements(userId)
        .stream()
        .filter(ua -> Boolean.TRUE.equals(ua.getIsAchieved()))
        .count();
}
```

### ì—…ì  ë‹¬ì„± ì‹œ ì•Œë¦¼
```java
if (achievement.getTargetDays() != null && progress >= achievement.getTargetDays() && !userAchievement.getIsAchieved()) {
    userAchievement.setIsAchieved(true);
    userAchievement.setAchievedDate(LocalDate.now());
    
    notificationService.saveNotification(
        userId, 
        "ACHIEVEMENT", 
        "ì—…ì  ë‹¬ì„±", 
        String.format("'%s' ì—…ì ì„ ë‹¬ì„±í–ˆìŠµë‹ˆë‹¤! ğŸ‰", achievement.getTitle())
    );
}
```

---

## ğŸ ë³´ìƒ ì‹œìŠ¤í…œ

### ì‹œì¦Œ ë³´ìƒ
| ìˆœìœ„ | ë³´ìƒ í¬ì¸íŠ¸ | ì„¤ëª… |
|------|-------------|------|
| 1ìœ„ | 10,000ì  | ì‹œì¦Œ ì±”í”¼ì–¸ |
| 2ìœ„ | 5,000ì  | ì‹œì¦Œ ì¤€ìš°ìŠ¹ |
| 3ìœ„ | 2,000ì  | ì‹œì¦Œ 3ìœ„ |

### ì—°ì† ê¸°ë¡ ë³´ìƒ
| ì—°ì† ì¼ìˆ˜ | ë³´ìƒ í¬ì¸íŠ¸ | ì„¤ëª… |
|-----------|-------------|------|
| 7ì¼ | 100ì  | ì£¼ê°„ ì—°ì† ê¸°ë¡ |
| 30ì¼ | 500ì  | ì›”ê°„ ì—°ì† ê¸°ë¡ |
| 100ì¼ | 2,000ì  | 100ì¼ ì—°ì† ê¸°ë¡ |

### ë³´ìƒ ì§€ê¸‰ ë¡œì§
```java
@Transactional(readOnly = true)
public RankingRewardDto getMyReward(Long userId) {
    UserRanking myRanking = userRankingRepository.findByUserId(userId)
        .orElseGet(() -> createDefaultRanking(userId));
    
    int reward = 0;
    if (myRanking.getRankPosition() == 1) reward = 10000;
    else if (myRanking.getRankPosition() == 2) reward = 5000;
    else if (myRanking.getRankPosition() == 3) reward = 2000;
    
    return RankingRewardDto.builder()
        .userId(userId)
        .rankPosition(myRanking.getRankPosition())
        .totalScore(myRanking.getTotalScore())
        .rewardType("personal")
        .rewardPoints(reward)
        .build();
}
```

---

## ğŸ“ˆ ì„±ëŠ¥ ìµœì í™”

### ì¸ë±ìŠ¤ ì„¤ì •
```sql
-- ë­í‚¹ ì¡°íšŒ ì„±ëŠ¥ í–¥ìƒ
CREATE INDEX IF NOT EXISTS idx_user_ranking_total_score ON user_ranking(total_score DESC);
CREATE INDEX IF NOT EXISTS idx_user_ranking_user_id ON user_ranking(user_id);
```

### ìºì‹œ í™œìš©
- ë­í‚¹ ë°ì´í„° ìºì‹±
- ìƒìœ„ ë­ì»¤ ëª©ë¡ ìºì‹±
- ì—…ì  ì •ë³´ ìºì‹±

### ë°°ì¹˜ ì²˜ë¦¬
- ìŠ¤ì¼€ì¤„ëŸ¬ë¥¼ í†µí•œ ì¼ê´„ ì²˜ë¦¬
- íŠ¸ëœì­ì…˜ ìµœì í™”
- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ê´€ë¦¬

---

## ğŸ”§ ì„¤ì • ë° ì»¤ìŠ¤í„°ë§ˆì´ì§•

### ì ìˆ˜ ê°€ì¤‘ì¹˜ ì¡°ì •
```java
// ìš´ë™ ì ìˆ˜ ê°€ì¤‘ì¹˜
private static final int EXERCISE_TIME_MULTIPLIER = 2;
private static final double CALORIES_MULTIPLIER = 0.5;

// ì¶œì„ ì ìˆ˜ ê°€ì¤‘ì¹˜
private static final int STREAK_MULTIPLIER = 10;

// ì—…ì  ì ìˆ˜ ê°€ì¤‘ì¹˜
private static final int ACHIEVEMENT_MULTIPLIER = 50;
```

### ë“±ê¸‰ ê¸°ì¤€ ì¡°ì •
```java
// ë“±ê¸‰ë³„ ì ìˆ˜ ê¸°ì¤€ (í•„ìš”ì‹œ ì¡°ì • ê°€ëŠ¥)
private static final int BRONZE_THRESHOLD = 1000;
private static final int SILVER_THRESHOLD = 2000;
private static final int GOLD_THRESHOLD = 3000;
// ... ê¸°íƒ€ ë“±ê¸‰ ê¸°ì¤€
```

---

## ğŸ“ ê²°ë¡ 

LifeBitì˜ ë­í‚¹ ì‹œìŠ¤í…œì€ ë‹¤ìŒê³¼ ê°™ì€ íŠ¹ì§•ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤:

1. **ê³µì •í•œ í‰ê°€**: ìš´ë™, ì‹ë‹¨, ì¶œì„, ì—…ì ì„ ì¢…í•©ì ìœ¼ë¡œ í‰ê°€
2. **ì‹¤ì‹œê°„ ë°˜ì˜**: ì‚¬ìš©ì í™œë™ì´ ì¦‰ì‹œ ì ìˆ˜ì— ë°˜ì˜
3. **ë™ê¸°ë¶€ì—¬**: 9ë‹¨ê³„ ë“±ê¸‰ ì‹œìŠ¤í…œìœ¼ë¡œ ì§€ì†ì ì¸ ë™ê¸°ë¶€ì—¬
4. **ìë™í™”**: ìŠ¤ì¼€ì¤„ëŸ¬ë¥¼ í†µí•œ ìë™ ê°±ì‹  ë° ì•Œë¦¼
5. **í™•ì¥ì„±**: ìƒˆë¡œìš´ ì—…ì ì´ë‚˜ í‰ê°€ ê¸°ì¤€ ì¶”ê°€ ê°€ëŠ¥

ì´ ì‹œìŠ¤í…œì„ í†µí•´ ì‚¬ìš©ìë“¤ì€ ê±´ê°•í•œ ìƒí™œ ìŠµê´€ì„ í˜•ì„±í•˜ê³  ì§€ì†í•  ìˆ˜ ìˆëŠ” ê°•ë ¥í•œ ë™ê¸°ë¶€ì—¬ë¥¼ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. 